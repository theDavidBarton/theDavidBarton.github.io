'use strict'

const d9nSvg =
  '<path d="M 66.179939,0 V 2.1993489 19.595703 H 45.900558 l 0.556553,-2.240174 h -1.392163 l 1.392163,-5.597591 H 31.127299 30.367654 25.529708 21.484477 17.465083 15.886886 2.6742554 L 2.2598105,13.425535 0,22.509736 h 4.2188648 v 11.197249 h 9.4686722 2.373498 5.423442 4.045231 4.837946 0.759645 9.711033 2.94711 22.394497 4.324283 14.406356 c 3.133141,0 6.031008,-0.83303 8.071858,-2.884577 0.187931,-0.188921 0.315069,-0.418304 0.482659,-0.621152 l -0.872816,3.505729 h 17.659911 c 2.45189,0 4.74379,-0.535358 6.60942,-1.740461 v 1.740461 h 16.01969 v -1.543058 l 0.76739,1.543058 h 12.87674 V 0 H 130.50625 V 1.5430579 L 129.73834,0 H 116.86161 V 1.7399449 C 114.99598,0.5348419 112.70408,0 110.25219,0 h -7.79901 C 99.320035,0 96.422168,0.8330274 94.381317,2.8845774 94.108527,3.1587995 93.91183,3.483729 93.681619,3.7868489 93.451418,3.483729 93.255227,3.1587995 92.982436,2.8845774 90.941586,0.8330274 88.043708,0 84.910578,0 Z m 3.451468,3.249414 H 85.06509 c 5.144674,0 7.717358,2.5721654 7.717358,7.71684 v 11.575521 c 0,5.144675 -2.572684,7.716843 -7.717358,7.716843 H 69.631407 Z m 32.796963,0 h 7.71736 c 5.14468,0 7.71685,2.5721654 7.71685,7.71684 v 11.575521 c 0,5.144675 -2.57217,7.716843 -7.71685,7.716843 H 96.64061 l 1.929599,-7.716843 h 9.645931 v -1.92908 h -5.78777 c -5.144671,0 -7.716839,-2.572684 -7.716839,-7.717359 v -1.929082 c 0,-5.1446746 2.572168,-7.71684 7.716839,-7.71684 z m 17.36329,0 h 7.71736 l 5.78776,11.575521 V 3.249414 h 9.64592 v 27.009204 h -7.71684 L 129.4381,18.683097 v 11.575521 h -9.64644 z m -40.514331,7.71684 V 22.541775 H 83.13601 V 10.966254 Z m 25.080641,0 v 1.929082 h 3.85817 V 10.966254 Z M 6.1035025,14.824935 H 17.128152 l -1.102775,4.409548 H 13.820861 V 30.258618 H 8.3085373 V 19.234483 H 5.0012457 Z m 11.5755205,0 h 5.512326 v 5.511808 h 2.205033 v -5.511808 h 5.511807 V 30.258618 H 25.396382 V 24.74681 h -2.205033 v 5.511808 h -5.512326 z m 14.331942,0 h 11.024134 l -1.102259,4.409548 h -9.921875 z m 0,5.511808 H 43.035099 L 41.93284,24.74681 h -9.921875 z m 12.539802,2.205032 h 23.151042 v 7.716843 H 44.550767 Z m -12.539802,3.307291 h 11.024134 l -1.102259,4.409552 h -9.921875 z" fill="#f3699c"></path>' +
  '<path d="M 68.379288,2.1993489 V 31.507636 h 0.93741 15.59388 c 2.756149,0 4.991817,-0.708139 6.511748,-2.236039 1.519928,-1.5279 2.222603,-3.770989 2.222603,-6.539137 V 10.974522 c 0,-2.7681473 -0.702675,-5.0112345 -2.222603,-6.5391344 C 89.902395,2.907485 87.666727,2.1993489 84.910578,2.1993489 Z m 34.073892,0 c -2.756153,0 -4.991822,0.7081361 -6.51175,2.2360387 -1.51993,1.5278999 -2.222605,3.7709871 -2.222605,6.5391344 v 1.959055 c 0,2.768147 0.702675,5.013301 2.222605,6.541201 1.519928,1.527902 3.755597,2.233972 6.51175,2.233972 h 4.9103 v 0.0863 h -9.541029 l -2.415873,9.712584 h 14.845612 c 2.75616,0 4.99181,-0.708139 6.51174,-2.236039 1.51994,-1.5279 2.22261,-3.770989 2.22261,-6.539137 V 10.974522 c 0,-2.7681473 -0.70267,-5.0112345 -2.22261,-6.5391344 C 115.244,2.907485 113.00835,2.1993489 110.25219,2.1993489 Z m 16.60777,0 V 31.507636 h 11.621 v -8.704895 l 4.32997,8.704895 h 9.31467 V 2.1993489 H 132.70508 V 10.904244 L 128.37511,2.1993489 Z M 70.670337,4.4961634 85.456975,3.935214 c 5.140977,-0.1950293 7.325473,1.8863654 7.325473,7.03104 v 11.575521 c 0,5.144675 -2.572684,7.716843 -7.717358,7.716843 L 70.878166,29.219588 Z M 102.42837,3.249414 h 7.71736 c 5.14468,0 7.71685,2.5721654 7.71685,7.71684 v 11.575521 c 0,5.144675 -2.57217,7.716843 -7.71685,7.716843 l -11.741518,-0.146843 0.165997,-7.57 h 9.645931 v -1.92908 h -5.78777 c -5.144671,0 -6.915461,-2.776252 -6.492196,-7.47243 l 0.195943,-2.174011 c 0.461816,-5.123905 1.151582,-7.71684 6.296253,-7.71684 z m 18.5411,-0.034861 6.53955,0.034861 6.27269,13.792361 -0.48493,-13.792361 h 9.64592 l -0.9796,26.960332 -6.73724,0.04887 -5.78776,-11.575521 v 11.575521 h -9.64644 z M 79.277329,10.966254 V 22.541775 H 83.13601 L 83.517026,10.51596 Z m 25.080641,0 v 1.929082 h 3.85817 l 0.76204,-3.7302647 z m -24.357685,0.945679 h 2.023647 v 9.883119 h -2.023647 z m 25.340055,0 2.8758,-0.945679 -0.90165,1.764695 -1.97415,-0.734786 z M 4.394564,13.956771 2.8148153,20.310388 H 6.4182138 V 31.507636 H 13.861686 V 20.310388 h 2.023131 l 0.0021,-0.0078 v 11.205001 h 7.443472 v -5.59961 h 0.353468 v 5.599657 h 6.683827 0.759645 10.935251 l 0.176215,-0.710552 0.798401,-3.209104 v 3.919656 H 68.304921 V 21.795052 H 67.36751 43.086307 L 43.64286,19.554878 H 42.250181 L 43.64286,13.956771 H 31.127346 30.367701 23.683874 v 5.598107 h -0.353468 v -5.598107 h -5.865323 -1.578197 z m 1.7089385,0.868164 H 17.128152 l -1.102775,4.409548 -2.841331,-0.220435 0.636815,11.24457 H 8.3085373 V 29.632814 H 8.2930327 V 19.234483 h -3.291787 z m 11.5755205,0 h 5.512326 v 5.511808 l 2.412863,0.147211 -0.20783,-5.659019 h 5.511807 V 30.258618 H 25.396382 V 24.74681 h -2.205033 v 5.511808 h -5.512326 z m 14.331942,0 h 11.024134 l -2.3761,3.135851 -8.648034,1.273697 z m 0,5.511808 h 11.024134 l -1.935228,3.62606 -9.088906,0.784007 z m 11.0262,1.651576 v 3.1657 h -0.789098 z m 1.478966,0.899838 23.185678,-0.346382 v 7.716843 H 44.550767 Z m -12.505166,2.960909 h 11.024134 l -1.935228,3.576909 -9.088906,0.832643 z" fill="#000000"></path>' +
  '<path d="m 129.43804,18.683214 v 11.575518 h -9.64627 l 1.1777,-27.0441794 6.53931,0.034638 5.78799,11.5757444 -2.3e-4,-11.5757444 h 9.64627 l -0.97971,26.9605554 -6.7373,0.04899 z m -21.22179,-5.787759 0.46801,-2.579219 -4.32651,0.649967 v 1.929252 z m 9.64627,9.646265 c 0,5.144675 -2.57234,7.717012 -7.71702,7.717012 L 98.404212,30.111775 98.569986,22.54172 h 9.646264 v -1.929253 h -5.78776 c -5.144674,0 -6.608255,-2.279728 -6.492371,-7.423098 l 0.04899,-2.17418 C 96.100992,5.8718187 97.28382,3.2491907 102.42849,3.2491907 h 7.71701 c 5.14468,0 7.71702,2.572337 7.71702,7.7170123 z M 70.878166,29.219588 70.670337,4.4961634 85.946966,3.9349907 c 5.141201,-0.1888572 6.83526,1.886537 6.83526,7.0312123 V 22.54172 c 0,5.144675 -2.57234,7.717012 -7.71701,7.717012 z m 8.39929,-18.253385 V 22.54172 h 3.85851 l 0.38106,-12.025761 z M 67.701937,22.54172 v 7.717012 H 44.550901 l -0.03477,-7.370576 z M 40.658999,17.960786 32.010743,19.234415 V 14.824689 H 43.03506 Z m 0.440872,6.002017 -9.089128,0.783771 V 20.336847 H 43.03506 Z m 0,5.463172 -9.089128,0.832757 V 25.849005 H 43.03506 Z M 17.679133,14.824689 h 5.512158 v 5.512158 l 2.412919,0.147108 -0.208056,-5.659266 h 5.512159 v 15.434043 h -5.512159 v -5.512158 h -2.204863 v 5.512158 h -5.512158 z m -4.495088,4.189359 0.636577,11.244684 H 8.3084647 V 19.234415 h -3.307295 l 1.102431,-4.409726 H 17.127917 l -1.102432,4.409726 z" fill="#ffff7d"></path>'

const googleSvg =
  '<path fill="#EA4335" d="M115.75 47.18c0 12.77-9.99 22.18-22.25 22.18s-22.25-9.41-22.25-22.18C71.25 34.32 81.24 25 93.5 25s22.25 9.32 22.25 22.18zm-9.74 0c0-7.98-5.79-13.44-12.51-13.44S80.99 39.2 80.99 47.18c0 7.9 5.79 13.44 12.51 13.44s12.51-5.55 12.51-13.44z"/><path fill="#FBBC05" d="M163.75 47.18c0 12.77-9.99 22.18-22.25 22.18s-22.25-9.41-22.25-22.18c0-12.85 9.99-22.18 22.25-22.18s22.25 9.32 22.25 22.18zm-9.74 0c0-7.98-5.79-13.44-12.51-13.44s-12.51 5.46-12.51 13.44c0 7.9 5.79 13.44 12.51 13.44s12.51-5.55 12.51-13.44z"/><path fill="#4285F4" d="M209.75 26.34v39.82c0 16.38-9.66 23.07-21.08 23.07-10.75 0-17.22-7.19-19.66-13.07l8.48-3.53c1.51 3.61 5.21 7.87 11.17 7.87 7.31 0 11.84-4.51 11.84-13v-3.19h-.34c-2.18 2.69-6.38 5.04-11.68 5.04-11.09 0-21.25-9.66-21.25-22.09 0-12.52 10.16-22.26 21.25-22.26 5.29 0 9.49 2.35 11.68 4.96h.34v-3.61h9.25zm-8.56 20.92c0-7.81-5.21-13.52-11.84-13.52-6.72 0-12.35 5.71-12.35 13.52 0 7.73 5.63 13.36 12.35 13.36 6.63 0 11.84-5.63 11.84-13.36z"/><path fill="#34A853" d="M225 3v65h-9.5V3h9.5z"/><path fill="#EA4335" d="M262.02 54.48l7.56 5.04c-2.44 3.61-8.32 9.83-18.48 9.83-12.6 0-22.01-9.74-22.01-22.18 0-13.19 9.49-22.18 20.92-22.18 11.51 0 17.14 9.16 18.98 14.11l1.01 2.52-29.65 12.28c2.27 4.45 5.8 6.72 10.75 6.72 4.96 0 8.4-2.44 10.92-6.14zm-23.27-7.98l19.82-8.23c-1.09-2.77-4.37-4.7-8.23-4.7-4.95 0-11.84 4.37-11.59 12.93z"/><path fill="#4285F4" d="M35.29 41.41V32H67c.31 1.64.47 3.58.47 5.68 0 7.06-1.93 15.79-8.15 22.01-6.05 6.3-13.78 9.66-24.02 9.66C16.32 69.35.36 53.89.36 34.91.36 15.93 16.32.47 35.3.47c10.5 0 17.98 4.12 23.6 9.49l-6.64 6.64c-4.03-3.78-9.49-6.72-16.97-6.72-13.86 0-24.7 11.17-24.7 25.03 0 13.86 10.84 25.03 24.7 25.03 8.99 0 14.11-3.61 17.39-6.89 2.66-2.66 4.41-6.46 5.1-11.65l-22.49.01z"/>'

// portfolio projects
const portfolioProjects = [
  {
    id: 0,
    title: 'Trending Movies app',
    imgSrc: 'img/portfolio/tmdb',
    projectDemoUrl: '/redirect?url=https://trending-movies-react-app-frontend.onrender.com',
    preconnectNeeded: 'https://trending-movies-react-app-backend.onrender.com',
    projectSourceUrl: 'https://github.com/theDavidBarton/trending-movies-react-app',
    techStack: ['Node.Js', 'React.Js'],
    logoPaths: d9nSvg
  },
  {
    id: 1,
    title: 'Trending Video Games app',
    imgSrc: 'img/portfolio/rawg',
    projectDemoUrl: '/redirect?url=https://trending-video-games-frontend.onrender.com',
    preconnectNeeded: 'https://trending-video-games-backend.onrender.com',
    projectSourceUrl: 'https://github.com/theDavidBarton/video-games-on-RAWG-react-app',
    techStack: ['Node.Js', 'React.Js'],
    logoPaths: d9nSvg
  },
  {
    id: 2,
    title: 'OneyPlays api',
    imgSrc: 'img/portfolio/oney',
    projectDemoUrl: 'https://www.npmjs.com/package/oneyplays-api',
    preconnectNeeded: null,
    projectSourceUrl: 'https://github.com/theDavidBarton/oneyplays-api',
    techStack: ['Node.Js'],
    logoPaths: d9nSvg
  },
  {
    id: 3,
    title: 'The Harry Potter Database',
    imgSrc: 'img/portfolio/thpdb',
    projectDemoUrl: '/redirect?url=https://the-harry-potter-database-frontend.onrender.com',
    preconnectNeeded: 'https://the-harry-potter-database-backend.onrender.com',
    projectSourceUrl: 'https://github.com/theDavidBarton/the-harry-potter-database',
    techStack: ['Node.Js', 'React.Js'],
    logoPaths: d9nSvg
  },
  {
    id: 4,
    title: 'Simple Puppeteer Uptime Checker',
    imgSrc: 'img/portfolio/uptime',
    projectDemoUrl: null,
    preconnectNeeded: null,
    projectSourceUrl: 'https://github.com/theDavidBarton/simple-puppeteer-uptime-checker',
    techStack: ['Node.Js'],
    logoPaths: d9nSvg
  },
  {
    id: 5,
    title: 'Pixel Art Project',
    imgSrc: 'img/portfolio/pixel',
    projectDemoUrl: 'https://thedavidbarton.github.io/pixel-art/',
    preconnectNeeded: null,
    projectSourceUrl: 'https://github.com/theDavidBarton/pixel-art',
    techStack: ['Node.Js', 'React.Js', 'GIMP'],
    logoPaths: d9nSvg
  },
  {
    id: 6,
    title: 'Retro Game Finder',
    imgSrc: 'img/portfolio/retro',
    projectDemoUrl: '/redirect?url=https://retro-game-finder-frontend.onrender.com',
    preconnectNeeded: 'https://retro-game-finder-backend.onrender.com',
    projectSourceUrl: 'https://github.com/theDavidBarton/retro-game-finder',
    techStack: ['Node.Js', 'React.Js'],
    logoPaths: d9nSvg
  },
  {
    id: 7,
    title: 'Puppeteer (contributor)',
    imgSrc: 'img/portfolio/pptr',
    projectDemoUrl: null,
    projectSourceUrl: 'https://github.com/puppeteer/puppeteer/graphs/contributors#:~:text=theDavidBarton',
    techStack: ['JavaScript', 'documentation', 'contribution'],
    logoPaths: googleSvg,
    logoviewBox: '0 0 272 92'
  }
]

// it helps for the Render Node.Js backend to wake up 7 secends earlier than the Render frontend would
const preconnectTo = async url => {
  try {
    const endpoint = url + '/health?from=thedavidbarton.github.io'
    console.log(endpoint + ' being called for preconnect purposes')
    await fetch(endpoint)
  } catch (e) {
    console.error(e)
  }
}

document.addEventListener('DOMContentLoaded', () => {
  const projects = portfolioProjects
  const items = projects.map((item, i) => {
    // prettier-ignore
    return `<div class="item" id="${i}">
    <a id="${'project-' + i}" ${item.preconnectNeeded ? `onclick="preconnectTo('${item.preconnectNeeded}')"` : ''} target="_blank" rel="noopener noreferrer" href="${item.projectDemoUrl ? item.projectDemoUrl : item.projectSourceUrl}">
      <picture>
        <source srcset="${item.imgSrc}.webp" type="image/webp" class="item-img-webp" />
        <source srcset="${item.imgSrc}.jpg" type="image/jpeg" class="item-img-jpeg" />
        <img class="item-img" alt="${item.title}" src="${item.imgSrc}.jpg" />
      </picture>
      <section class="badge-position">${item.techStack.map(el => `<span class="small-badge">${el}</span>`).join(' ')}</section>
      <h3>${item.title}</h3>
      <svg class="logo-svg" xmlns="http://www.w3.org/2000/svg" viewBox="${item.logoviewBox ? item.logoviewBox : '0 0 146.52542 33.706986'}" width="150" style="position: absolute; top: 8rem; right: 1rem;">
      ${item.logoPaths}
      </svg> 
    </a>    
    <a class="source-link" title="check out source code on GitHub" target="_blank" rel="noopener noreferrer" href="${item.projectSourceUrl}">
      <img class="source-link-img" src="img/portfolio/github.svg" alt="source link to ${item.title}" />
    </a>
    ${item.projectDemoUrl ? `<a class="external-link" title="visit website" target="_blank" rel="noopener noreferrer" href="${item.projectDemoUrl}">
      <img class="external-link-img" src="img/portfolio/external_link.svg" alt="external link to ${item.title}" />
    </a>` : ''}   
  </div>`
  })
  const htmlJoined = items.join('')
  const portfolio = document.querySelector('#portfolio')
  portfolio.innerHTML = htmlJoined
})
